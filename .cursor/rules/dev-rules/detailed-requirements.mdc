---
description: 
globs: 
alwaysApply: true
---
# ShutterHub v2 è©³ç´°è¦ä»¶å®šç¾©

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ãŸã‚‰ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ç™ºè¨€ã™ã‚‹ã“ã¨

## ğŸš¨ **ç·Šæ€¥æ±ºå®šäº‹é …**

### **1. æ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ è©³ç´°è¨­è¨ˆ**

#### **Stripeè¨­å®š**
```yaml
payment_methods:
  enabled:
    - credit_card      # ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰
    - debit_card       # ãƒ‡ãƒ“ãƒƒãƒˆã‚«ãƒ¼ãƒ‰
    - paypal          # PayPal
    - apple_pay       # Apple Payï¼ˆiOSå¯¾å¿œï¼‰
    - google_pay      # Google Payï¼ˆAndroidå¯¾å¿œï¼‰
  
  currencies:
    primary: "JPY"
    supported: ["JPY", "USD", "EUR"]
```

#### **æ‰‹æ•°æ–™ä½“ç³»**
```yaml
platform_fees:
  standard_rate: 10.0  # 10%ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ‰‹æ•°æ–™
  calculation: "gross_amount"  # ç·é¡ã‹ã‚‰è¨ˆç®—
  
  fee_breakdown:
    platform_fee: 10.0    # ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ‰‹æ•°æ–™
    stripe_fee: ~3.6      # Stripeæ‰‹æ•°æ–™ï¼ˆåˆ¥é€”ï¼‰
    
  payout_schedule:
    frequency: "weekly"    # é€±æ¬¡æ”¯æ‰•ã„
    minimum_amount: 1000   # æœ€å°æ”¯æ‰•é¡ï¼ˆå††ï¼‰
```

#### **æ”¯æ‰•ã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°**
```yaml
payment_timing:
  default: "prepaid"           # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼šå‰æ‰•ã„
  
  options:
    prepaid:
      description: "äº‹å‰æ±ºæ¸ˆ"
      availability: "all_users"
      
    cash_on_site:
      description: "ç¾åœ°æ‰•ã„"
      availability: "subscription_users"  # ã‚µãƒ–ã‚¹ã‚¯é™å®š
      requirements:
        - verified_account
        - minimum_rating: 4.0
        
    split_payment:
      description: "åˆ†å‰²æ‰•ã„"
      availability: "premium_subscription"  # ãƒ—ãƒ¬ãƒŸã‚¢ãƒ é™å®š
      options: [2, 3, 6]  # åˆ†å‰²å›æ•°
```

#### **è¿”é‡‘ãƒãƒªã‚·ãƒ¼**
```yaml
refund_policy:
  cancellation_rules:
    - period: "7_days_before"
      refund_rate: 100
      description: "7æ—¥å‰ã¾ã§ï¼šå…¨é¡è¿”é‡‘"
      
    - period: "3_days_before"
      refund_rate: 50
      description: "3-7æ—¥å‰ï¼š50%è¿”é‡‘"
      
    - period: "1_day_before"
      refund_rate: 20
      description: "1-3æ—¥å‰ï¼š20%è¿”é‡‘"
      
    - period: "same_day"
      refund_rate: 0
      description: "å½“æ—¥ï¼šè¿”é‡‘ãªã—"
      
  emergency_cancellation:
    weather: 100          # å¤©å€™ä¸è‰¯ï¼šå…¨é¡è¿”é‡‘
    illness: 80           # ä½“èª¿ä¸è‰¯ï¼š80%è¿”é‡‘
    force_majeure: 100    # ä¸å¯æŠ—åŠ›ï¼šå…¨é¡è¿”é‡‘
```

#### **ç¨é‡‘å‡¦ç†**
```yaml
tax_handling:
  display_method: "tax_inclusive"  # ç¨è¾¼è¡¨ç¤º
  calculation:
    consumption_tax: 10    # æ¶ˆè²»ç¨10%
    display_format: "Â¥1,100ï¼ˆç¨è¾¼ï¼‰"
    breakdown_display: false  # å†…è¨³è¡¨ç¤ºãªã—
```

### **2. ç”»åƒãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†è©³ç´°**

#### **ç”»åƒåœ§ç¸®æˆ¦ç•¥**
```yaml
image_optimization:
  formats:
    input: ["jpg", "jpeg", "png", "webp", "heic"]
    output: ["webp", "jpg"]  # WebPå„ªå…ˆã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨JPEG
    
  quality_settings:
    high_quality: 85      # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã€ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª
    standard_quality: 75  # ä¸€èˆ¬çš„ãªç”»åƒ
    thumbnail: 60         # ã‚µãƒ ãƒã‚¤ãƒ«
    
  size_limits:
    original: 15          # MBï¼ˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ™‚ï¼‰
    display_max: 2        # MBï¼ˆè¡¨ç¤ºç”¨ï¼‰
    thumbnail: 200        # KB
    
  resize_breakpoints:
    thumbnail: 300        # px
    small: 600           # px
    medium: 1200         # px
    large: 1920          # px
    original: "preserve"  # å…ƒã‚µã‚¤ã‚ºä¿æŒ
```

#### **CDNè¨­å®š**
```yaml
cdn_strategy:
  primary: "Supabase Storage"
  edge_network: "Vercel Edge Network"
  
  caching:
    images: "1 year"
    thumbnails: "6 months"
    profile_images: "1 month"
    
  optimization:
    auto_webp: true
    responsive_images: true
    lazy_loading: true
```

#### **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç”»åƒè©³ç´°**
```yaml
responsive_images:
  implementation: "Next.js Image component"
  
  breakpoints:
    mobile: 600          # px - ã‚¹ãƒãƒ›ç”¨
    tablet: 1200         # px - ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆç”¨
    desktop: 1920        # px - ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ç”¨
    
  density_variants:
    standard: "1x"       # æ¨™æº–è§£åƒåº¦
    retina: "2x"         # é«˜è§£åƒåº¦ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ç”¨
    
  formats:
    primary: "webp"      # æœ€å„ªå…ˆ
    fallback: "jpg"      # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    
  benefits:
    - "ã‚¹ãƒãƒ›ï¼šè»½é‡ç”»åƒã§é«˜é€Ÿè¡¨ç¤º"
    - "ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ï¼šé«˜å“è³ªç”»åƒã§ç¾ã—ã„è¡¨ç¤º"
    - "å¸¯åŸŸå¹…å‰Šæ¸›ï¼šæœ€é©ã‚µã‚¤ã‚ºé…ä¿¡"
    - "SEOå‘ä¸Šï¼šCore Web Vitalsæ”¹å–„"
```

#### **ç”»åƒæ‰¿èªãƒ•ãƒ­ãƒ¼**
```yaml
image_moderation:
  initial_implementation: "none"  # å¾Œã‹ã‚‰åˆ¶å¾¡è¿½åŠ 
  future_features:
    - ai_content_detection
    - manual_review_queue
    - user_reporting_system
```

#### **è‘—ä½œæ¨©ãƒ»è‚–åƒæ¨©ç®¡ç†**
```yaml
rights_management:
  user_education:
    upload_guidelines: true
    rights_explanation: true
    consent_forms: true
    
  self_management_tools:
    - rights_declaration_checkbox
    - model_consent_upload
    - copyright_claim_system
    - takedown_request_form
    
  legal_protection:
    terms_of_service: "æ˜ç¢ºãªæ¨©åˆ©é–¢ä¿‚è¨˜è¼‰"
    dmca_compliance: true
    user_responsibility: "æ˜ç¤º"
```

### **3. åœ°å›³ãƒ»ä½ç½®æƒ…å ±ã‚µãƒ¼ãƒ“ã‚¹**

#### **åœ°å›³ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼é¸å®š**
```yaml
map_provider:
  primary: "OpenStreetMap + Leaflet.js"
  fallback: "Google Maps"  # å¿…è¦æ™‚ã®ã¿
  
  implementation_strategy:
    phase_1: "OpenStreetMapï¼ˆç„¡æ–™ï¼‰"
    phase_2: "Google Mapsæ¤œè¨ï¼ˆäºˆç®—æ¬¡ç¬¬ï¼‰"
    
  features_needed:
    - location_display
    - marker_placement
    - basic_search
    - mobile_responsive
```

#### **ä½ç½®æƒ…å ±ç²¾åº¦ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼**
```yaml
location_services:
  precision_requirement: "city_level"  # å¸‚åŒºç”ºæ‘ãƒ¬ãƒ™ãƒ«
  
  instant_photo_request:
    matching_radius: 5000    # 5kmï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
    user_selectable: true    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠå¯èƒ½
    options: [1, 3, 5, 10, 20]  # km
    
  privacy_settings:
    storage_duration: "session_only"  # ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­ã®ã¿
    sharing_scope: "matched_users_only"
    exact_location: false    # æ­£ç¢ºãªä½ç½®ã¯éè¡¨ç¤º
```

## ğŸ”„ **Phase 1å®Ÿè£…å‰æ±ºå®šäº‹é …**

### **4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆè©³ç´°**

#### **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ©ãƒ³ã‚¯ã‚·ã‚¹ãƒ†ãƒ **
```yaml
user_ranking:
  calculation_factors:
    completed_sessions: 40    # å®Œäº†ã—ãŸæ’®å½±ä¼šæ•°
    average_rating: 30        # å¹³å‡è©•ä¾¡
    response_time: 20         # å¿œç­”é€Ÿåº¦
    cancellation_rate: 10     # ã‚­ãƒ£ãƒ³ã‚»ãƒ«ç‡ï¼ˆãƒã‚¤ãƒŠã‚¹è¦å› ï¼‰
    
  rank_levels:
    - name: "ãƒ–ãƒ­ãƒ³ã‚º"
      threshold: 0
      benefits: ["åŸºæœ¬æ©Ÿèƒ½"]
      
    - name: "ã‚·ãƒ«ãƒãƒ¼"
      threshold: 100
      benefits: ["å„ªå…ˆè¡¨ç¤º", "ç¾åœ°æ‰•ã„å¯èƒ½"]
      
    - name: "ã‚´ãƒ¼ãƒ«ãƒ‰"
      threshold: 500
      benefits: ["åˆ†å‰²æ‰•ã„", "æ‰‹æ•°æ–™å‰²å¼•5%"]
      
    - name: "ãƒ—ãƒ©ãƒãƒŠ"
      threshold: 1000
      benefits: ["æ‰‹æ•°æ–™å‰²å¼•10%", "å°‚ç”¨ã‚µãƒãƒ¼ãƒˆ"]
```

#### **è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ **
```yaml
rating_system:
  scale: 5                    # 5æ®µéšè©•ä¾¡
  categories:
    overall: "ç·åˆè©•ä¾¡"
    communication: "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³"
    punctuality: "æ™‚é–“å³å®ˆ"
    quality: "å“è³ª"
    
  display_format:
    stars: true
    numerical: true           # 4.2/5.0
    review_count: true        # (123ä»¶)
```

#### **é€šå ±ãƒ»ãƒ–ãƒ­ãƒƒã‚¯æ©Ÿèƒ½**
```yaml
moderation_system:
  report_categories:
    - inappropriate_behavior
    - harassment
    - no_show
    - poor_quality
    - spam
    - copyright_violation
    
  automated_actions:
    multiple_reports: "temporary_suspension"
    low_rating_threshold: 2.0
    
  manual_review:
    serious_violations: true
    appeal_process: true
```

#### **ãƒ‡ãƒ¼ã‚¿ä¿æŒæœŸé–“**
```yaml
data_retention:
  user_accounts: "until_deletion"
  session_history: "3_years"
  messages: "1_year"
  ratings_reviews: "permanent"
  location_data: "session_only"
  payment_records: "7_years"  # æ³•çš„è¦ä»¶
  
  automated_cleanup:
    inactive_accounts: "2_years"
    temporary_files: "7_days"
    log_files: "90_days"
```

### **5. é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ è©³ç´°**

#### **é€šçŸ¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°**
```yaml
notification_timing:
  user_configurable: true
  
  default_settings:
    booking_reminder: "24_hours"
    instant_request: "immediate"
    message_received: "immediate"
    
  user_options:
    - "immediate"
    - "15_minutes"
    - "1_hour"
    - "6_hours"
    - "24_hours"
    - "disabled"
```

#### **ç·Šæ€¥é€šçŸ¥**
```yaml
emergency_notifications:
  weather_cancellation:
    method: "push_notification"
    fallback: "sms"
    timing: "as_soon_as_possible"
    
  system_maintenance:
    advance_notice: "24_hours"
    method: "in_app_banner"
    
  security_alerts:
    method: "email + push"
    immediate: true
```

#### **ã‚¹ãƒ‘ãƒ é˜²æ­¢**
```yaml
notification_limits:
  per_user_per_hour: 10
  per_user_per_day: 50
  marketing_per_week: 2
  
  rate_limiting:
    same_content: "1_hour_cooldown"
    bulk_notifications: "admin_approval_required"
```

### **6. æ¤œç´¢ãƒ»æ¨è–¦ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **

#### **æ¤œç´¢ãƒ©ãƒ³ã‚­ãƒ³ã‚°é‡ã¿ä»˜ã‘**
```yaml
search_ranking:
  configurable_weights: true  # å¾Œã‹ã‚‰èª¿æ•´å¯èƒ½
  
  default_weights:
    relevance: 30             # ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é–¢é€£æ€§
    rating: 25                # è©•ä¾¡
    distance: 20              # è·é›¢
    popularity: 15            # äººæ°—åº¦
    recency: 10               # æ–°ã—ã•
    
  admin_adjustable: true      # ç®¡ç†ç”»é¢ã§èª¿æ•´å¯èƒ½
```

#### **æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ **
```yaml
recommendation_system:
  phase_1: "simple_rules"     # ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹
  phase_2: "collaborative_filtering"  # å”èª¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
  
  simple_rules:
    - same_genre_preference
    - similar_price_range
    - nearby_locations
    - similar_user_ratings
```

#### **ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**
```yaml
filtering_options:
  required_filters:
    - date_range
    - location_area
    - price_range
    - session_type
    
  optional_filters:
    - studio_name
    - photographer_rating
    - model_experience_level
    - available_slots
    - cancellation_policy
```

## ğŸ¨ **UI/UXè¨­è¨ˆè©³ç´°**

### **7. ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ **

#### **ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ**
```yaml
color_palette:
  primary: "#6F5091"          # ãƒ—ãƒ©ã‚¤ãƒãƒªãƒ¼ï¼ˆç´«ï¼‰
  secondary: "#101820"        # ã‚»ã‚«ãƒ³ãƒ€ãƒªãƒ¼ï¼ˆãƒ€ãƒ¼ã‚¯ã‚°ãƒ¬ãƒ¼ï¼‰
  
  extended_palette:
    primary_light: "#8B6BB1"
    primary_dark: "#5A4073"
    secondary_light: "#2A2A2A"
    
    accent: "#FF6B6B"         # ã‚¢ã‚¯ã‚»ãƒ³ãƒˆï¼ˆã‚¨ãƒ©ãƒ¼ãƒ»é‡è¦ï¼‰
    success: "#4ECDC4"        # æˆåŠŸ
    warning: "#FFE66D"        # è­¦å‘Š
    info: "#4D96FF"           # æƒ…å ±
    
  neutral:
    white: "#FFFFFF"
    gray_50: "#F9FAFB"
    gray_100: "#F3F4F6"
    gray_200: "#E5E7EB"
    gray_300: "#D1D5DB"
    gray_400: "#9CA3AF"
    gray_500: "#6B7280"
    gray_600: "#4B5563"
    gray_700: "#374151"
    gray_800: "#1F2937"
    gray_900: "#111827"
    black: "#000000"
```

#### **ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£**
```yaml
typography:
  japanese: "Noto Sans JP"
  english: "Inter"
  fallback: "system-ui, sans-serif"
  
  font_weights:
    light: 300
    regular: 400
    medium: 500
    semibold: 600
    bold: 700
    
  font_sizes:
    xs: "0.75rem"    # 12px
    sm: "0.875rem"   # 14px
    base: "1rem"     # 16px
    lg: "1.125rem"   # 18px
    xl: "1.25rem"    # 20px
    "2xl": "1.5rem"  # 24px
    "3xl": "1.875rem" # 30px
    "4xl": "2.25rem"  # 36px
```

#### **ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆ**
```yaml
icon_system:
  library: "Lucide React"
  style: "outline"
  fallback: "Heroicons"
  
  custom_icons:
    - camera_professional
    - studio_location
    - photo_session
    - instant_request
```

#### **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**
```yaml
animations:
  library: "GSAP"             # é«˜åº¦ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨
  css_transitions: "Tailwind" # åŸºæœ¬çš„ãªãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³
  
  timing_functions:
    ease_in_out: "cubic-bezier(0.4, 0, 0.2, 1)"
    bounce: "cubic-bezier(0.68, -0.55, 0.265, 1.55)"
    
  durations:
    fast: "150ms"
    normal: "300ms"
    slow: "500ms"
```

### **8. ãƒ¢ãƒã‚¤ãƒ«UXè©³ç´°**

#### **ãƒœãƒˆãƒ ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³**
```yaml
bottom_navigation:
  tabs:
    - icon: "home"
      label: "ãƒ›ãƒ¼ãƒ "
      route: "/"
      
    - icon: "search"
      label: "æ¤œç´¢"
      route: "/search"
      
    - icon: "calendar"
      label: "äºˆç´„"
      route: "/bookings"
      
    - icon: "zap"
      label: "å³åº§æ’®å½±"
      route: "/instant"
      
    - icon: "user"
      label: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«"
      route: "/profile"
```

#### **ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼æ“ä½œ**
```yaml
gestures:
  swipe_gallery:
    enabled: true
    library: "Swiper.js"
    
  pull_to_refresh:
    enabled: true
    threshold: 60  # px
    
  infinite_scroll:
    enabled: true
    threshold: 200  # px from bottom
```

## ğŸ“Š **ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯è©³ç´°**

### **9. å³åº§æ’®å½±ãƒªã‚¯ã‚¨ã‚¹ãƒˆè©³ç´°**

#### **ãƒãƒƒãƒãƒ³ã‚°è¨­å®š**
```yaml
instant_matching:
  default_radius: 5           # km
  user_selectable_radius: [1, 3, 5, 10, 20]  # km
  
  response_time:
    user_selectable: true
    options: [5, 10, 15, 30]  # åˆ†
    default: 10               # åˆ†
    
  matching_algorithm:
    distance: 40              # %
    rating: 25                # %
    response_speed: 20        # %
    price_compatibility: 15   # %
```

#### **æ–™é‡‘è¨­å®šã‚·ã‚¹ãƒ†ãƒ **
```yaml
pricing_system:
  client_side:
    price_setting: "user_defined"  # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒæ–™é‡‘è¨­å®š
    suggested_range: "3000-12000"  # 15åˆ†3,000å††ã€œ60åˆ†12,000å††
    
    price_components:
      base_rate: "user_input"      # åŸºæœ¬æ–™é‡‘ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ï¼‰
      duration: "user_selectable"  # æ’®å½±æ™‚é–“é¸æŠ
      additional_services: "optional"  # è¿½åŠ ã‚µãƒ¼ãƒ“ã‚¹
      
  photographer_side:
    notification_filters:
      minimum_rate: "user_configurable"  # æœ€ä½æ–™é‡‘è¨­å®š
      maximum_rate: "user_configurable"  # æœ€é«˜æ–™é‡‘è¨­å®š
      preferred_duration: "user_selectable"  # å¸Œæœ›æ’®å½±æ™‚é–“
      
    rate_preferences:
      hourly_minimum: "photographer_defined"
      travel_compensation: "auto_calculated"  # è·é›¢ã«å¿œã˜ãŸäº¤é€šè²»
      equipment_surcharge: "optional"
      
  dynamic_pricing:
    surge_pricing: false        # åˆæœŸã¯å›ºå®šæ–™é‡‘
    demand_based: false         # å°†æ¥æ¤œè¨
    time_based: false           # å°†æ¥æ¤œè¨ï¼ˆå¤œé–“æ–™é‡‘ç­‰ï¼‰
```

#### **ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒãƒªã‚·ãƒ¼**
```yaml
cancellation_policy:
  free_cancellation_window: 5  # åˆ†ï¼ˆå—æ³¨å¾Œï¼‰
  
  penalties:
    photographer:
      late_cancellation: "rating_penalty"
      no_show: "temporary_suspension"
      
    client:
      late_cancellation: "partial_charge"
      no_show: "full_charge"
```

### **10. StudioWikiè©³ç´°**

#### **ç·¨é›†æ¨©é™ãƒ»æ‰¿èªãƒ•ãƒ­ãƒ¼**
```yaml
studio_wiki:
  edit_permissions: "authenticated_users"
  
  approval_system:
    method: "community_moderation"
    implementation:
      - edit_suggestions        # ç›´æ¥ç·¨é›†ã§ã¯ãªãææ¡ˆã‚·ã‚¹ãƒ†ãƒ 
      - peer_review_system      # è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã‚‹ç›¸äº’ãƒã‚§ãƒƒã‚¯
      - reputation_based_auto_approval  # é«˜è©•ä¾¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªå‹•æ‰¿èª
      
  anti_vandalism:
    version_control: true     # ç·¨é›†å±¥æ­´ä¿æŒ
    rollback_capability: true # è’ã‚‰ã—ç·¨é›†ã®å·»ãæˆ»ã—
    edit_rate_limiting: true  # ç·¨é›†é »åº¦åˆ¶é™
    
    automated_detection:
      - spam_content
      - inappropriate_language
      - mass_deletion
      
  data_structure:
    hierarchical: true
    categories:
      - basic_info
      - facilities
      - equipment
      - pricing
      - reviews_ratings
      - photos
```

### **11. ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½è©³ç´°**

#### **ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³è¨­è¨ˆæ–¹é‡**
```yaml
subscription_system:
  design_philosophy: "future_extensible"  # å°†æ¥ã®æ‹¡å¼µã‚’è€ƒæ…®ã—ãŸè¨­è¨ˆ
  
  initial_implementation:
    payment_options_unlock: true    # ç¾åœ°æ‰•ã„ãƒ»åˆ†å‰²æ‰•ã„è§£æ”¾
    feature_flags: true             # æ©Ÿèƒ½ãƒ•ãƒ©ã‚°ã«ã‚ˆã‚‹åˆ¶å¾¡
    database_schema: "subscription_ready"  # ã‚µãƒ–ã‚¹ã‚¯å¯¾å¿œã‚¹ã‚­ãƒ¼ãƒ
    
  planned_features:
    tiered_plans:
      - name: "ãƒ™ãƒ¼ã‚·ãƒƒã‚¯"
        price: "æœªå®š"
        features: ["ç¾åœ°æ‰•ã„", "å„ªå…ˆè¡¨ç¤º"]
        
      - name: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ "  
        price: "æœªå®š"
        features: ["åˆ†å‰²æ‰•ã„", "æ‰‹æ•°æ–™å‰²å¼•", "å°‚ç”¨ã‚µãƒãƒ¼ãƒˆ"]
        
    billing_cycle:
      options: ["monthly", "yearly"]
      default: "monthly"
      billing_date: "registration_anniversary"  # ç™»éŒ²æ—¥èª²é‡‘
      
  technical_implementation:
    payment_processor: "Stripe Subscriptions"
    feature_gating: "database_flags"
    upgrade_downgrade: "immediate_effect"
    cancellation: "end_of_billing_period"
```

## ğŸ”§ **æŠ€è¡“è¨­å®šè©³ç´°**

### **12. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**

#### **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥**
```yaml
caching:
  static_assets: "1_year"
  api_responses: "5_minutes"
  user_profiles: "1_hour"
  search_results: "15_minutes"
  studio_info: "1_day"
  
  cache_invalidation:
    user_data_update: "immediate"
    content_update: "immediate"
    system_update: "manual"
```

#### **ç”»åƒæœ€é©åŒ–**
```yaml
image_optimization:
  responsive_images:
    description: "ãƒ‡ãƒã‚¤ã‚¹è§£åƒåº¦ã«å¿œã˜ãŸæœ€é©ã‚µã‚¤ã‚ºé…ä¿¡"
    implementation: "Next.js Image component"
    formats: ["webp", "avif", "jpg"]
    
  lazy_loading: true
  blur_placeholder: true
  priority_loading: "above_fold_images"
```

#### **ãƒãƒ³ãƒ‰ãƒ«æœ€é©åŒ–**
```yaml
bundle_optimization:
  code_splitting: true
  tree_shaking: true
  dynamic_imports: true
  
  targets:
    initial_bundle: "< 200KB"
    total_js: "< 1MB"
    css: "< 100KB"
```

### **13. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š**

#### **ãƒ¬ãƒ¼ãƒˆåˆ¶é™**
```yaml
rate_limiting:
  api_calls:
    authenticated: "1000/hour"
    anonymous: "100/hour"
    
  specific_endpoints:
    auth: "5/minute"
    search: "60/minute"
    upload: "10/minute"
    
  supabase_limits:
    respect_tier_limits: true
    monitor_usage: true
```

#### **CORSãƒ»CSPè¨­å®š**
```yaml
security_headers:
  cors:
    allowed_origins: ["https://shutterhub.app"]
    credentials: true
    
  csp:
    default_src: "'self'"
    script_src: "'self' 'unsafe-inline' https://js.stripe.com"
    style_src: "'self' 'unsafe-inline'"
    img_src: "'self' data: https:"
    connect_src: "'self' https://api.stripe.com"
```

## ğŸ“‹ **å®Ÿè£…å„ªå…ˆåº¦**

### **Phase 1 (MVP) - å¿…é ˆå®Ÿè£…**
- [ ] æ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ ï¼ˆStripe + åŸºæœ¬è¨­å®šï¼‰
- [ ] ç”»åƒæœ€é©åŒ–ï¼ˆWebPå¤‰æ› + ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ï¼‰
- [ ] åœ°å›³è¡¨ç¤ºï¼ˆOpenStreetMap + Leafletï¼‰
- [ ] 5æ®µéšè©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 
- [ ] åŸºæœ¬é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
- [ ] ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆé©ç”¨
- [ ] ã‚µãƒ–ã‚¹ã‚¯å¯¾å¿œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### **Phase 2 - æ‹¡å¼µæ©Ÿèƒ½**
- [ ] é«˜åº¦ãªæ±ºæ¸ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆç¾åœ°æ‰•ã„ç­‰ï¼‰
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ©ãƒ³ã‚¯ã‚·ã‚¹ãƒ†ãƒ 
- [ ] æ¨è–¦ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
- [ ] GSAP ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] StudioWikiåŸºæœ¬æ©Ÿèƒ½
- [ ] å³åº§æ’®å½±æ–™é‡‘è¨­å®šã‚·ã‚¹ãƒ†ãƒ 

### **Phase 3 - æœ€é©åŒ–**
- [ ] é«˜åº¦ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–
- [ ] StudioWikié«˜åº¦æ©Ÿèƒ½
- [ ] ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½å®Ÿè£…

ã“ã®è©³ç´°è¦ä»¶å®šç¾©ã«ã‚ˆã‚Šã€å®Ÿè£…æ™‚ã®è¿·ã„ã‚’æœ€å°é™ã«æŠ‘ãˆã€ä¸€è²«æ€§ã®ã‚ã‚‹ShutterHub v2ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚
