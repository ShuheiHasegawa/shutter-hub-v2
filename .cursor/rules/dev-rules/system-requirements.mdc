---
description: 
globs: 
alwaysApply: true
---
# ShutterHub v2 ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶å®šç¾©

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ãŸã‚‰ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ç™ºè¨€ã™ã‚‹ã“ã¨

## ğŸ¯ **æ¦‚è¦**

ShutterHub v2ã®æŠ€è¡“è¦ä»¶ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ã€é‹ç”¨è¦ä»¶ã‚’åŒ…æ‹¬çš„ã«å®šç¾©ã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€‚
é–‹ç™ºé–‹å§‹å‰ã«æ±ºå®šã™ã¹ãé‡è¦ãªé …ç›®ã‚’ç¶²ç¾…ã—ã€å¾Œã‹ã‚‰ã®ä»•æ§˜å¤‰æ›´ãƒªã‚¹ã‚¯ã‚’æœ€å°åŒ–ã™ã‚‹ã€‚

## ğŸ” **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¦ä»¶**

### **å€‹äººæƒ…å ±ä¿è­·ãƒ»GDPRå¯¾å¿œ**
```yaml
compliance:
  gdpr: true  # æµ·å¤–å±•é–‹ã‚’è¦‹æ®ãˆã¦åˆæœŸã‹ã‚‰å¯¾å¿œ
  personal_data_protection_act: true  # å€‹äººæƒ…å ±ä¿è­·æ³•å¯¾å¿œ
  data_processing_consent: true  # æ˜ç¤ºçš„ãªåŒæ„å–å¾—
  right_to_be_forgotten: true  # ãƒ‡ãƒ¼ã‚¿å‰Šé™¤æ¨©å¯¾å¿œ
  data_portability: true  # ãƒ‡ãƒ¼ã‚¿ãƒãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œ
```

### **èªè¨¼ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**
```yaml
authentication:
  password_policy:
    min_length: 8
    require_uppercase: true
    require_lowercase: true
    require_numbers: true
    require_special_chars: false  # åˆ©ä¾¿æ€§é‡è¦–
    max_attempts: 5
    lockout_duration: 15  # åˆ†
  
  session_management:
    session_timeout: 30  # æ—¥ï¼ˆåˆ©ä¾¿æ€§é‡è¦–ï¼‰
    remember_me_duration: 90  # æ—¥
    concurrent_sessions: 3  # è¤‡æ•°ãƒ‡ãƒã‚¤ã‚¹å¯¾å¿œ
  
  two_factor_auth:
    required: false  # ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
    methods: ["email", "sms", "authenticator_app"]
  
  security_headers:
    csrf_protection: true
    xss_protection: true
    content_security_policy: true
    hsts: true
    frame_options: "DENY"
```

## ğŸ“± **å¯¾å¿œç’°å¢ƒãƒ»ãƒ‡ãƒã‚¤ã‚¹è¦ä»¶**

### **ãƒ–ãƒ©ã‚¦ã‚¶ã‚µãƒãƒ¼ãƒˆ**
```yaml
browsers:
  chrome: "æœ€æ–°2ãƒãƒ¼ã‚¸ãƒ§ãƒ³"  # å¿…é ˆ
  firefox: "æœ€æ–°2ãƒãƒ¼ã‚¸ãƒ§ãƒ³"
  safari: "æœ€æ–°2ãƒãƒ¼ã‚¸ãƒ§ãƒ³"  # iPhoneé‡è¦
  edge: "æœ€æ–°2ãƒãƒ¼ã‚¸ãƒ§ãƒ³"
  ie: false  # å¯¾å¿œãªã—
  mobile_browsers:
    chrome_mobile: true
    safari_mobile: true  # iOSé‡è¦
    samsung_internet: true
```

### **ãƒ‡ãƒã‚¤ã‚¹ãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ**
```yaml
responsive_design:
  framework: "TailwindCSS"  # Shadcn/uiæº–æ‹ 
  breakpoints:
    sm: "640px"   # TailwindCSSæ¨™æº–
    md: "768px"   # ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ
    lg: "1024px"  # ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—
    xl: "1280px"  # å¤§ç”»é¢
    "2xl": "1536px"
  
  target_devices:
    mobile: true
    tablet: true
    desktop: true
  
  touch_support: true
  keyboard_navigation: true
```

### **PWAå¯¾å¿œ**
```yaml
pwa:
  enabled: true
  features:
    offline_support: true
    push_notifications: true
    app_install_prompt: true
    bottom_navigation: true  # Xãƒ»ãƒ¡ãƒ«ã‚«ãƒªé¢¨
    splash_screen: true
  
  manifest:
    theme_color: "#000000"
    background_color: "#ffffff"
    display: "standalone"
    orientation: "portrait"
```

## ğŸŒ **å›½éš›åŒ–ãƒ»åœ°åŸŸå¯¾å¿œè¦ä»¶**

### **å¤šè¨€èªå¯¾å¿œ**
```yaml
i18n:
  initial_languages: ["ja", "en"]  # åˆæœŸå¯¾å¿œ
  future_languages: ["ko", "zh-CN", "zh-TW"]  # å°†æ¥å¯¾å¿œå€™è£œ
  default_language: "ja"
  
  localization:
    date_format:
      ja: "YYYYå¹´MMæœˆDDæ—¥"
      en: "MM/DD/YYYY"
    time_format: "24h"  # 24æ™‚é–“è¡¨è¨˜
    number_format:
      ja: "1,000"
      en: "1,000"
  
  content_strategy:
    ui_translation: true
    user_generated_content: false  # åˆæœŸã¯ç¿»è¨³ãªã—
    auto_translation: false  # å°†æ¥æ¤œè¨
```

### **ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ãƒ»åœ°åŸŸå¯¾å¿œ**
```yaml
timezone:
  support: true  # åˆæœŸã‹ã‚‰å¯¾å¿œ
  default: "Asia/Tokyo"
  user_timezone_detection: true
  dst_support: true  # ã‚µãƒãƒ¼ã‚¿ã‚¤ãƒ å¯¾å¿œ
  
regional:
  currency_support: ["JPY", "USD", "EUR"]  # Stripeå¯¾å¿œé€šè²¨
  payment_regions:
    primary: ["JP", "US", "CA", "AU", "GB", "SG"]  # Stripeä¸»è¦åœ°åŸŸ
    future: ["EU", "KR"]  # å°†æ¥å¯¾å¿œ
```

## âš¡ **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£è¦ä»¶**

### **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™**
```yaml
performance:
  page_load_time:
    target: 2000  # 2ç§’ä»¥å†…
    maximum: 3000  # 3ç§’ä»¥å†…ï¼ˆè¨±å®¹å€¤ï¼‰
  
  api_response_time:
    target: 300   # 300msä»¥å†…
    maximum: 500  # 500msä»¥å†…ï¼ˆè¨±å®¹å€¤ï¼‰
  
  lighthouse_scores:
    performance: 90
    accessibility: 95
    best_practices: 95
    seo: 95
  
  core_web_vitals:
    lcp: 2.5  # Largest Contentful Paint
    fid: 100  # First Input Delay (ms)
    cls: 0.1  # Cumulative Layout Shift
```

### **å®¹é‡ãƒ»åˆ¶é™**
```yaml
file_limits:
  image_upload:
    standard_user: 5   # MB
    premium_user: 15   # MBï¼ˆå°†æ¥ã®ã‚µãƒ–ã‚¹ã‚¯æ©Ÿèƒ½ï¼‰
    formats: ["jpg", "jpeg", "png", "webp"]
  
  file_upload:
    max_size: 10  # MB
    formats: ["pdf", "doc", "docx"]
  
  storage_quota:
    standard_user: 1000  # MB
    premium_user: 5000   # MB
```

### **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**
```yaml
scalability:
  concurrent_users:
    initial: 1000
    target_1year: 5000
    peak_handling: 10000
  
  database:
    connection_pool: 20
    query_timeout: 30  # ç§’
    slow_query_threshold: 1000  # ms
  
  cdn:
    enabled: true
    provider: "Vercel Edge Network"
    cache_strategy: "stale-while-revalidate"
```

## ğŸ“Š **åˆ†æãƒ»ç›£è¦–è¦ä»¶**

### **ã‚¢ã‚¯ã‚»ã‚¹è§£æ**
```yaml
analytics:
  google_analytics: true
  google_tag_manager: true
  
  custom_events:
    user_registration: true
    photo_session_booking: true
    payment_completion: true
    instant_photo_request: true
    studio_evaluation: true
  
  conversion_tracking:
    signup_funnel: true
    booking_funnel: true
    payment_funnel: true
    retention_analysis: true
```

### **ã‚¨ãƒ©ãƒ¼ç›£è¦–ãƒ»ãƒ­ã‚°**
```yaml
monitoring:
  error_tracking:
    provider: "Sentry"  # å¿…è¦æ™‚å°å…¥
    client_side: true
    server_side: true
    performance_monitoring: true
  
  logging:
    level: "info"
    retention: 30  # æ—¥
    structured_logging: true
    
  uptime_monitoring:
    provider: "Vercel Analytics"
    check_interval: 60  # ç§’
    alert_threshold: 99.9  # %
```

### **ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•åˆ†æ**
```yaml
user_behavior:
  heatmap_analysis: false  # å°†æ¥æ¤œè¨
  session_recording: false  # ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è€ƒæ…®
  
  valuable_metrics:
    user_journey_mapping: true
    feature_usage_tracking: true
    search_behavior_analysis: true
    booking_pattern_analysis: true
    studio_discovery_patterns: true
```

## ğŸ“¢ **é€šçŸ¥ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¦ä»¶**

### **ãƒ¡ãƒ¼ãƒ«é€šçŸ¥**
```yaml
email:
  provider: "Resend"  # Next.jsæ¨å¥¨
  types:
    transactional: true   # äºˆç´„ç¢ºèªç­‰
    marketing: false      # åˆæœŸã¯ä¸è¦
    system_alerts: true   # ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥
  
  templates:
    welcome_email: true
    booking_confirmation: true
    booking_reminder: true
    password_reset: true
    account_verification: true
  
  frequency_limits:
    daily_max: 5
    weekly_max: 10
```

### **ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥**
```yaml
push_notifications:
  enabled: true  # å¿…é ˆæ©Ÿèƒ½
  providers: ["Web Push API", "FCM"]
  
  types:
    booking_reminders: true     # æ’®å½±ãƒªãƒã‚¤ãƒ³ãƒ‰
    instant_requests: true      # å³åº§æ’®å½±ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    system_alerts: true         # ç·Šæ€¥é€£çµ¡
    marketing: false            # åˆæœŸã¯ä¸è¦
  
  user_preferences:
    granular_control: true      # ç¨®é¡åˆ¥è¨­å®šå¯èƒ½
    quiet_hours: true           # å¤œé–“é…ä¿¡åœæ­¢
    timezone_aware: true
```

### **SMSé€šçŸ¥**
```yaml
sms:
  provider: "Twilio"  # å°†æ¥å°å…¥
  use_cases:
    emergency_only: false
    booking_reminders: true     # ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šå¯èƒ½
    verification: true          # 2FAç”¨
    instant_requests: true      # ç·Šæ€¥ãƒãƒƒãƒãƒ³ã‚°
  
  user_control:
    opt_in_required: true
    granular_settings: true
```

## ğŸ’¾ **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»é‹ç”¨è¦ä»¶**

### **ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**
```yaml
backup:
  frequency:
    database: "daily"
    files: "daily"
    full_system: "weekly"
  
  retention:
    daily_backups: 7   # æ—¥
    weekly_backups: 4  # é€±
    monthly_backups: 12 # æœˆ
  
  storage:
    primary: "Supabaseè‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—"
    secondary: "AWS S3"  # å°†æ¥æ¤œè¨
  
  testing:
    restore_test_frequency: "monthly"
    recovery_time_objective: 4  # æ™‚é–“
    recovery_point_objective: 1 # æ™‚é–“
```

### **ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ»é‹ç”¨**
```yaml
maintenance:
  scheduled_window:
    day: "Sunday"
    time: "02:00-05:00 JST"
    max_duration: 3  # æ™‚é–“
    advance_notice: 48  # æ™‚é–“
  
  deployment:
    strategy: "blue-green"
    rollback_capability: true
    zero_downtime: true  # ç›®æ¨™
  
  monitoring:
    health_checks: true
    automated_alerts: true
    on_call_rotation: false  # åˆæœŸã¯ä¸è¦
```

## âš–ï¸ **æ³•å‹™ãƒ»ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹è¦ä»¶**

### **åˆ©ç”¨è¦ç´„ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼**
```yaml
legal_documents:
  privacy_policy:
    required_by: "MVPå‰"
    gdpr_compliant: true
    cookie_policy: true
    data_processing_details: true
  
  terms_of_service:
    required_by: "MVPå‰"
    user_responsibilities: true
    service_limitations: true
    dispute_resolution: true
  
  age_restrictions:
    minimum_age: 13  # COPPAæº–æ‹ 
    parental_consent: true  # 18æ­³æœªæº€
    age_verification: false  # åˆæœŸã¯è‡ªå·±ç”³å‘Š
```

### **ãƒ‡ãƒ¼ã‚¿ä¿è­·ãƒ»å‰Šé™¤ãƒãƒªã‚·ãƒ¼**
```yaml
data_protection:
  retention_periods:
    user_accounts: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤ã¾ã§"
    booking_history: 3  # å¹´
    payment_records: 7  # å¹´ï¼ˆæ³•çš„è¦ä»¶ï¼‰
    log_files: 1  # å¹´
    analytics_data: 2  # å¹´
  
  deletion_policy:
    user_request_response: 30  # æ—¥ä»¥å†…
    automated_cleanup: true
    secure_deletion: true
    deletion_confirmation: true
  
  data_export:
    user_data_export: true  # GDPRè¦ä»¶
    format: "JSON"
    delivery_method: "email"
```

## ğŸ”§ **æŠ€è¡“ä»•æ§˜ãƒ»åˆ¶ç´„**

### **é–‹ç™ºç’°å¢ƒ**
```yaml
development:
  node_version: "18.x"
  next_version: "14.x"
  typescript: true
  package_manager: "npm"
  
  code_quality:
    eslint: true
    prettier: true
    husky: true  # pre-commit hooks
    commitlint: true
  
  testing:
    unit_tests: "Jest"
    integration_tests: "Playwright"
    coverage_target: 80  # %
```

### **æœ¬ç•ªç’°å¢ƒ**
```yaml
production:
  hosting: "Vercel"
  database: "Supabase PostgreSQL"
  storage: "Supabase Storage"
  cdn: "Vercel Edge Network"
  
  environment_variables:
    encryption: true
    rotation_policy: "quarterly"
    access_control: "role-based"
  
  ssl_certificate:
    provider: "Let's Encrypt"
    auto_renewal: true
    hsts_enabled: true
```

## ğŸ“‹ **å®Ÿè£…å„ªå…ˆåº¦**

### **Phase 1 (MVP)**
- [ ] åŸºæœ¬ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šï¼ˆCSRFã€XSSå¯¾ç­–ï¼‰
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆTailwindCSSï¼‰
- [ ] åŸºæœ¬çš„ãªå¤šè¨€èªå¯¾å¿œï¼ˆæ—¥æœ¬èªãƒ»è‹±èªï¼‰
- [ ] Google Analyticsè¨­å®š
- [ ] åŸºæœ¬çš„ãªãƒ¡ãƒ¼ãƒ«é€šçŸ¥

### **Phase 2 (æ‹¡å¼µæ©Ÿèƒ½)**
- [ ] PWAå¯¾å¿œ
- [ ] ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
- [ ] ã‚¨ãƒ©ãƒ¼ç›£è¦–ï¼ˆSentryï¼‰
- [ ] é«˜åº¦ãªåˆ†ææ©Ÿèƒ½
- [ ] SMSé€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 

### **Phase 3 (æœ€é©åŒ–)**
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [ ] é«˜åº¦ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥
- [ ] è¿½åŠ è¨€èªå¯¾å¿œ
- [ ] é«˜åº¦ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½

## ğŸ¯ **æˆåŠŸæŒ‡æ¨™**

### **æŠ€è¡“æŒ‡æ¨™**
- ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿é€Ÿåº¦: 2ç§’ä»¥å†…
- APIå¿œç­”æ™‚é–“: 300msä»¥å†…
- ã‚¢ãƒƒãƒ—ã‚¿ã‚¤ãƒ : 99.9%ä»¥ä¸Š
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ: 0ä»¶

### **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“æŒ‡æ¨™**
- ãƒ¢ãƒã‚¤ãƒ«åˆ©ç”¨ç‡: 70%ä»¥ä¸Š
- å¤šè¨€èªåˆ©ç”¨ç‡: 20%ä»¥ä¸Šï¼ˆè‹±èªï¼‰
- PWAã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç‡: 15%ä»¥ä¸Š
- é€šçŸ¥é–‹å°ç‡: 30%ä»¥ä¸Š

ã“ã®è¦ä»¶å®šç¾©ã«åŸºã¥ã„ã¦ã€å„ãƒ•ã‚§ãƒ¼ã‚ºã§ã®å®Ÿè£…ã‚’é€²ã‚ã‚‹ã“ã¨ã§ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§å®‰å…¨ãªShutterHub v2ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚
